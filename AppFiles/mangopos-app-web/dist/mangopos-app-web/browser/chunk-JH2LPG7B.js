import{a as le}from"./chunk-7MVBSPFH.js";import"./chunk-7UZYWCAJ.js";import{c as V,d as F,f as b,g as E,h as B}from"./chunk-CJPLD6EO.js";import{b as de,c as me}from"./chunk-HIZ742YJ.js";import{c as z,d as $,g as H}from"./chunk-6OXQWIOV.js";import{a as Q}from"./chunk-SCPRHZYR.js";import{a as W,b as X,c as Y,d as Z,e as ee,f as te,g as ne,h as oe,i as ie,j as ae,l as re}from"./chunk-VJGP4MMT.js";import"./chunk-VNZMNOUU.js";import"./chunk-YCMZOG5D.js";import{a as q,h as A}from"./chunk-ZWM7H6SC.js";import{a as K}from"./chunk-PALJ6VDH.js";import"./chunk-TEMJ73U5.js";import"./chunk-52A733DE.js";import"./chunk-GPHRSLLH.js";import"./chunk-EWTXOCXT.js";import"./chunk-AVLO2MYP.js";import{a as G,b as J}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as N,I as j,K as U}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{k as L,l as R,v as k}from"./chunk-ZD4QWOHN.js";import{$ as P,Ac as O,Fb as l,Gb as o,Hb as n,Ib as M,Mb as _,Nb as C,Pb as w,Ub as g,Wa as m,Wb as p,ea as x,ec as y,fa as h,gc as I,ic as i,jb as S,jc as u,kc as v,pb as c,sc as T,zb as D}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";var pe=()=>["expandedDetail"];function ce(t,r){t&1&&(o(0,"th",17),i(1," C\xF3digo / Ref "),n())}function se(t,r){if(t&1&&(o(0,"td",18),i(1),n()),t&2){let e=r.$implicit;m(),v(" ",e.code||e.reference," ")}}function ue(t,r){t&1&&(o(0,"th",17),i(1," Nombre del Producto Compuesto "),n())}function fe(t,r){if(t&1&&(o(0,"td",18),i(1),n()),t&2){let e=r.$implicit;m(),v(" ",e.name," ")}}function _e(t,r){t&1&&(o(0,"th",19),i(1,"\xA0"),n())}function Ce(t,r){if(t&1){let e=w();o(0,"td",18)(1,"div",20)(2,"button",21),g("click",function(a){let s=x(e).$implicit,f=p();return h(f.toggleExpand(s,a))}),o(3,"mat-icon"),i(4),n()(),o(5,"button",22),g("click",function(){let a=x(e).$implicit,s=p();return h(s.editCompound(a.id))}),o(6,"mat-icon"),i(7,"edit"),n()()()()}if(t&2){let e=r.$implicit,d=p();m(2),l("matTooltip",d.expandedElement===e?"Contraer":"Ver Detalles / Insumos"),m(2),u(d.expandedElement===e?"expand_less":"expand_more")}}function ge(t,r){if(t&1&&(o(0,"div",29)(1,"span"),i(2),n(),o(3,"span"),i(4),n(),o(5,"span"),i(6),n(),o(7,"span"),i(8),n()()),t&2){let e=r.$implicit;m(2),u(e.insumo_name),m(2),u(e.cantidad),m(2),u(e.unidad_insumo_name),m(2),u(e.unidad_product_name)}}function xe(t,r){if(t&1&&(o(0,"div",26)(1,"div",27)(2,"span"),i(3,"Insumo"),n(),o(4,"span"),i(5,"Cantidad"),n(),o(6,"span"),i(7,"Unidad Insumo"),n(),o(8,"span"),i(9,"Unidad Producto (Base)"),n()(),c(10,ge,9,4,"div",28),n()),t&2){let e=p().$implicit,d=p();m(10),l("ngForOf",d.compoundDetailsMap[e.id])}}function he(t,r){t&1&&(o(0,"div",30),i(1,"Cargando insumos..."),n())}function Pe(t,r){if(t&1&&(o(0,"td",18)(1,"div",23)(2,"div",24)(3,"h3"),i(4,"Insumos / Ingredientes"),n(),c(5,xe,11,1,"div",25)(6,he,2,0,"ng-template",null,0,O),n()()()),t&2){let e=r.$implicit,d=y(7),a=p();D("colspan",a.displayedColumns.length),m(),l("@detailExpand",e==a.expandedElement?"expanded":"collapsed"),m(4),l("ngIf",a.compoundDetailsMap[e.id])("ngIfElse",d)}}function Me(t,r){t&1&&M(0,"tr",31)}function we(t,r){if(t&1){let e=w();o(0,"tr",32),g("click",function(a){let s=x(e).$implicit,f=p();return h(f.toggleExpand(s,a))}),n()}if(t&2){let e=r.$implicit,d=p();I("expanded-row",d.expandedElement===e)}}function ve(t,r){t&1&&M(0,"tr",33)}var Ae=(()=>{class t{compoundService=P(le);router=P(z);dataSource=[];displayedColumns=["code","name","expand"];expandedElement=null;compoundDetailsMap={};totalItems=0;pageSize=50;currentPage=1;ngOnInit(){this.loadCompoundProducts()}loadCompoundProducts(){this.compoundService.getProductsForCompounds(this.currentPage,this.pageSize).subscribe(e=>{this.dataSource=e.data,this.totalItems=e.total})}onPageChange(e){this.currentPage=e.pageIndex+1,this.pageSize=e.pageSize,this.loadCompoundProducts()}toggleExpand(e,d){d.stopPropagation(),this.expandedElement=this.expandedElement===e?null:e,this.expandedElement&&!this.compoundDetailsMap[e.id]&&this.compoundService.getCompoundProducts(e.id).subscribe(a=>{this.compoundDetailsMap[e.id]=a})}editCompound(e){this.router.navigate(["/dashboard/inventario/productos-compuestos"],{queryParams:{id:e}})}static \u0275fac=function(d){return new(d||t)};static \u0275cmp=S({type:t,selectors:[["app-compound-products-list"]],decls:25,vars:8,consts:[["loading",""],[1,"container"],[1,"header"],["mat-flat-button","","color","primary","routerLink","/dashboard/inventario/productos-compuestos"],[1,"table-card"],["mat-table","","multiTemplateDataRows","",1,"full-width",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],[1,"row-actions"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","","color","primary","matTooltip","Editar Receta",3,"click"],[1,"element-detail"],[1,"detail-container"],["class","components-grid",4,"ngIf","ngIfElse"],[1,"components-grid"],[1,"component-header"],["class","component-item",4,"ngFor","ngForOf"],[1,"component-item"],[1,"loading-detail"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"]],template:function(d,a){d&1&&(o(0,"div",1)(1,"div",2)(2,"h1"),i(3,"Consulta de Productos Compuestos"),n(),o(4,"button",3)(5,"mat-icon"),i(6,"add"),n(),i(7," Crear Nuevo Producto Compuesto "),n()(),o(8,"mat-card",4)(9,"table",5),_(10,6),c(11,ce,2,0,"th",7)(12,se,2,1,"td",8),C(),_(13,9),c(14,ue,2,0,"th",7)(15,fe,2,1,"td",8),C(),_(16,10),c(17,_e,2,0,"th",11)(18,Ce,8,2,"td",8),C(),_(19,12),c(20,Pe,8,4,"td",8),C(),c(21,Me,1,0,"tr",13)(22,we,1,2,"tr",14)(23,ve,1,0,"tr",15),n(),o(24,"app-shared-paginator",16),g("page",function(f){return a.onPageChange(f)}),n()()()),d&2&&(m(9),l("dataSource",a.dataSource),m(12),l("matHeaderRowDef",a.displayedColumns),m(),l("matRowDefColumns",a.displayedColumns),m(),l("matRowDefColumns",T(7,pe)),m(),l("length",a.totalItems)("pageSize",a.pageSize)("pageIndex",a.currentPage-1))},dependencies:[k,L,R,H,$,re,W,Y,ne,Z,X,oe,ee,te,ie,ae,de,me,J,G,U,j,N,A,q,Q,K],styles:[".container[_ngcontent-%COMP%]{padding:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:500}.table-card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.full-width[_ngcontent-%COMP%]{width:100%}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0;cursor:pointer}.element-row[_ngcontent-%COMP%]:hover{background:#0000000a}.detail-row[_ngcontent-%COMP%]{height:0}.element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.detail-container[_ngcontent-%COMP%]{width:100%;padding:16px 24px 24px;background:#fdfdfd;border-bottom:1px solid #eee}.detail-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:16px;color:#666}.components-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;background:#fff;border-radius:8px;border:1px solid #eee}.component-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:8px 16px;background:#f5f5f5;font-weight:500;font-size:.85rem;border-bottom:1px solid #eee}.component-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:8px 16px;font-size:.9rem;align-items:center}.component-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #f9f9f9}.row-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.loading-detail[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#999}"],data:{animation:[V("detailExpand",[E("collapsed,void",b({height:"0px",minHeight:"0",visibility:"hidden"})),E("expanded",b({height:"*",visibility:"visible"})),B("expanded <=> collapsed",F("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}return t})();export{Ae as CompoundProductsListComponent};
