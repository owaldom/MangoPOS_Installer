import{a as pt}from"./chunk-4LX67P6M.js";import"./chunk-7UZYWCAJ.js";import{c as H,d as F,f as E,g as S,h as B}from"./chunk-CJPLD6EO.js";import{b as dt,c as mt}from"./chunk-HIZ742YJ.js";import{c as $}from"./chunk-6OXQWIOV.js";import{a as W}from"./chunk-SCPRHZYR.js";import{a as X,b as Y,c as Z,d as tt,e as et,f as it,g as nt,h as ot,i as at,j as rt,l as lt}from"./chunk-VJGP4MMT.js";import"./chunk-VNZMNOUU.js";import"./chunk-YCMZOG5D.js";import{a as A,h as G}from"./chunk-ZWM7H6SC.js";import{a as U}from"./chunk-PALJ6VDH.js";import"./chunk-TEMJ73U5.js";import"./chunk-52A733DE.js";import"./chunk-GPHRSLLH.js";import"./chunk-EWTXOCXT.js";import"./chunk-AVLO2MYP.js";import{a as J,b as Q}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as N,I as j,K as q}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{k as L,l as R,u as z,v as V}from"./chunk-ZD4QWOHN.js";import{$ as b,Ac as I,Fb as m,Gb as n,Hb as i,Ib as M,Mb as u,Nb as f,Pb as w,Ub as x,Wa as r,Wb as c,ea as C,ec as k,fa as h,gc as v,ic as o,jb as y,jc as P,kc as _,pb as p,sc as T,vc as D,yc as O,zb as K}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";var ct=()=>["expandedDetail"];function st(e,a){e&1&&(n(0,"th",18),o(1," C\xF3digo "),i())}function ut(e,a){if(e&1&&(n(0,"td",19),o(1),i()),e&2){let t=a.$implicit;r(),_(" ",t.code," ")}}function ft(e,a){e&1&&(n(0,"th",18),o(1," Nombre del Kit "),i())}function _t(e,a){if(e&1&&(n(0,"td",19),o(1),i()),e&2){let t=a.$implicit;r(),_(" ",t.name," ")}}function gt(e,a){e&1&&(n(0,"th",18),o(1," Precio Venta "),i())}function xt(e,a){if(e&1&&(n(0,"td",19),o(1),D(2,"currency"),i()),e&2){let t=a.$implicit;r(),_(" ",O(2,1,t.pricesell,"VES","Bs. ")," ")}}function Ct(e,a){e&1&&(n(0,"th",20),o(1,"\xA0"),i())}function ht(e,a){if(e&1){let t=w();n(0,"td",19)(1,"div",21)(2,"button",22),x("click",function(l){let s=C(t).$implicit,g=c();return h(g.toggleExpand(s,l))}),n(3,"mat-icon"),o(4),i()(),n(5,"button",23),x("click",function(){let l=C(t).$implicit,s=c();return h(s.editKit(l.id))}),n(6,"mat-icon"),o(7,"edit"),i()()()()}if(e&2){let t=a.$implicit,d=c();r(2),m("matTooltip",d.expandedElement===t?"Contraer":"Ver Detalles"),r(2),P(d.expandedElement===t?"expand_less":"expand_more")}}function Pt(e,a){if(e&1&&(n(0,"div",30)(1,"span"),o(2),i(),n(3,"span"),o(4),i(),n(5,"span",31),o(6),i(),n(7,"span")(8,"mat-icon",32),o(9),i()()()),e&2){let t=a.$implicit;r(2),P(t.component_name),r(2),P(t.quantity),r(),v("flexible",t.group_id),r(),_(" ",t.group_name||"Fijo"," "),r(2),m("color",t.is_mandatory?"primary":"warn"),r(),_(" ",t.is_mandatory?"check_circle":"cancel"," ")}}function bt(e,a){if(e&1&&(n(0,"div",27)(1,"div",28)(2,"span"),o(3,"Producto"),i(),n(4,"span"),o(5,"Cantidad"),i(),n(6,"span"),o(7,"Grupo"),i(),n(8,"span"),o(9,"Oblig."),i()(),p(10,Pt,10,7,"div",29),i()),e&2){let t=c().$implicit,d=c();r(10),m("ngForOf",d.kitComponentsMap[t.id])}}function Mt(e,a){e&1&&(n(0,"div",33),o(1,"Cargando componentes..."),i())}function wt(e,a){if(e&1&&(n(0,"td",19)(1,"div",24)(2,"div",25)(3,"h3"),o(4,"Componentes del Kit"),i(),p(5,bt,11,1,"div",26)(6,Mt,2,0,"ng-template",null,0,I),i()()()),e&2){let t=a.$implicit,d=k(7),l=c();K("colspan",l.displayedColumns.length),r(),m("@detailExpand",t==l.expandedElement?"expanded":"collapsed"),r(4),m("ngIf",l.kitComponentsMap[t.id])("ngIfElse",d)}}function vt(e,a){e&1&&M(0,"tr",34)}function Et(e,a){if(e&1){let t=w();n(0,"tr",35),x("click",function(l){let s=C(t).$implicit,g=c();return h(g.toggleExpand(s,l))}),i()}if(e&2){let t=a.$implicit,d=c();v("expanded-row",d.expandedElement===t)}}function St(e,a){e&1&&M(0,"tr",36)}var Jt=(()=>{class e{kitService=b(pt);router=b($);dataSource=[];displayedColumns=["code","name","pricesell","expand"];expandedElement=null;kitComponentsMap={};totalItems=0;pageSize=50;currentPage=1;ngOnInit(){this.loadKits()}loadKits(){this.kitService.getKitHeaders(this.currentPage,this.pageSize).subscribe(t=>{this.dataSource=t.data,this.totalItems=t.total})}onPageChange(t){this.currentPage=t.pageIndex+1,this.pageSize=t.pageSize,this.loadKits()}toggleExpand(t,d){d.stopPropagation(),this.expandedElement=this.expandedElement===t?null:t,this.expandedElement&&!this.kitComponentsMap[t.id]&&this.kitService.getKitComponents(t.id).subscribe(l=>{this.kitComponentsMap[t.id]=l})}editKit(t){this.router.navigate(["/dashboard/inventario/kits-productos"],{queryParams:{id:t}})}static \u0275fac=function(d){return new(d||e)};static \u0275cmp=y({type:e,selectors:[["app-product-kits-list"]],decls:28,vars:8,consts:[["loading",""],[1,"container"],[1,"header"],["mat-flat-button","","color","primary","routerLink","/dashboard/inventario/kits-productos"],[1,"table-card"],["mat-table","","multiTemplateDataRows","",1,"full-width",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","pricesell"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],[1,"row-actions"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","","color","primary","matTooltip","Editar Kit",3,"click"],[1,"element-detail"],[1,"detail-container"],["class","components-grid",4,"ngIf","ngIfElse"],[1,"components-grid"],[1,"component-header"],["class","component-item",4,"ngFor","ngForOf"],[1,"component-item"],[1,"group-label"],[3,"color"],[1,"loading-detail"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"]],template:function(d,l){d&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),o(3,"Consulta de Kits de Productos"),i(),n(4,"button",3)(5,"mat-icon"),o(6,"add"),i(),o(7," Crear Nuevo Kit "),i()(),n(8,"mat-card",4)(9,"table",5),u(10,6),p(11,st,2,0,"th",7)(12,ut,2,1,"td",8),f(),u(13,9),p(14,ft,2,0,"th",7)(15,_t,2,1,"td",8),f(),u(16,10),p(17,gt,2,0,"th",7)(18,xt,3,5,"td",8),f(),u(19,11),p(20,Ct,2,0,"th",12)(21,ht,8,2,"td",8),f(),u(22,13),p(23,wt,8,4,"td",8),f(),p(24,vt,1,0,"tr",14)(25,Et,1,2,"tr",15)(26,St,1,0,"tr",16),i(),n(27,"app-shared-paginator",17),x("page",function(g){return l.onPageChange(g)}),i()()()),d&2&&(r(9),m("dataSource",l.dataSource),r(15),m("matHeaderRowDef",l.displayedColumns),r(),m("matRowDefColumns",l.displayedColumns),r(),m("matRowDefColumns",T(7,ct)),r(),m("length",l.totalItems)("pageSize",l.pageSize)("pageIndex",l.currentPage-1))},dependencies:[V,L,R,lt,X,Z,nt,tt,Y,ot,et,it,at,rt,dt,mt,Q,J,q,j,N,G,A,W,U,z],styles:[".container[_ngcontent-%COMP%]{padding:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:500}.table-card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.full-width[_ngcontent-%COMP%]{width:100%}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0;cursor:pointer}.element-row[_ngcontent-%COMP%]:hover{background:#0000000a}.detail-row[_ngcontent-%COMP%]{height:0}.element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.detail-container[_ngcontent-%COMP%]{width:100%;padding:16px 24px 24px;background:#fdfdfd;border-bottom:1px solid #eee}.detail-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:16px;color:#666}.components-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;background:#fff;border-radius:8px;border:1px solid #eee}.component-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:8px 16px;background:#f5f5f5;font-weight:500;font-size:.85rem;border-bottom:1px solid #eee}.component-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:8px 16px;font-size:.9rem;align-items:center}.component-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #f9f9f9}.group-label[_ngcontent-%COMP%]{padding:2px 8px;border-radius:4px;font-size:.8rem;background:#e3f2fd;color:#1976d2;width:fit-content}.group-label.flexible[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.row-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.loading-detail[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#999}"],data:{animation:[H("detailExpand",[S("collapsed,void",E({height:"0px",minHeight:"0",visibility:"hidden"})),S("expanded",E({height:"*",visibility:"visible"})),B("expanded <=> collapsed",F("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}return e})();export{Jt as ProductKitsListComponent};
