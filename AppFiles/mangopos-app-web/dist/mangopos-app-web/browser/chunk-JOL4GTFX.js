import{a as vt,b as Tt}from"./chunk-XEWEKXFC.js";import{a as b}from"./chunk-NN3ONOAJ.js";import{a as ut,b as ft,c as Ct,d as Mt,e as yt,f as gt,g as _t,h as T}from"./chunk-Z6YHTX75.js";import{a as F,b as I}from"./chunk-26KDQVR5.js";import"./chunk-EQXJNMRX.js";import{b as Y,c as Z}from"./chunk-APXOZHQA.js";import{a as it,b as nt,c as at,d as ot,e as rt,f as mt,g as lt,h as ct,i as pt,j as dt,l as st}from"./chunk-VJGP4MMT.js";import"./chunk-YCMZOG5D.js";import{a as L,b as q,c as z,d as K,f as J,h as Q}from"./chunk-ZWM7H6SC.js";import"./chunk-TEMJ73U5.js";import{b as U,i as W,j as X}from"./chunk-EWTXOCXT.js";import{b as R,d as N,f as H,g as G,k as O,n as V,o as j,w as $,y as P}from"./chunk-AVLO2MYP.js";import{a as tt,b as et}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as w,I as _,K as v}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{j as A,v as g}from"./chunk-ZD4QWOHN.js";import{$ as c,Fb as p,Gb as n,Hb as e,Ib as d,Mb as u,Nb as f,Pb as B,Ub as C,Wa as r,Wb as E,db as x,ea as h,fa as S,ic as a,jb as y,jc as D,kc as M,pb as s}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";var bt=(()=>{class t{data;fb=c($);banksService=c(b);dialogRef=c(ut);typeForm;saving=!1;constructor(i){this.data=i,this.typeForm=this.fb.group({name:[i.type?.name||"",N.required],description:[i.type?.description||""],active:[i.type?i.type.active:!0]})}onSubmit(){this.typeForm.invalid||(this.saving=!0,this.banksService.createBankAccountType(this.typeForm.value).subscribe({next:()=>this.dialogRef.close(!0),error:()=>{this.saving=!1,alert("Error al guardar el tipo de cuenta")}}))}static \u0275fac=function(l){return new(l||t)(x(ft))};static \u0275cmp=y({type:t,selectors:[["app-bank-account-type-dialog"]],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"d-flex","flex-column","gap-3","mt-2",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","name"],["matInput","","formControlName","description","rows","2"],["formControlName","active"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(l,o){l&1&&(n(0,"h2",0),a(1),e(),n(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),a(6,"Nombre"),e(),d(7,"input",3),e(),n(8,"mat-form-field",2)(9,"mat-label"),a(10,"Descripci\xF3n (Opcional)"),e(),d(11,"textarea",4),e(),n(12,"mat-checkbox",5),a(13,"Tipo Activo"),e()()(),n(14,"mat-dialog-actions",6)(15,"button",7),a(16,"Cancelar"),e(),n(17,"button",8),C("click",function(){return o.onSubmit()}),a(18),e()()),l&2&&(r(),M("",o.data.type?"Editar":"Nuevo"," Tipo de Cuenta"),r(2),p("formGroup",o.typeForm),r(14),p("disabled",o.typeForm.invalid||o.saving),r(),M(" ",o.saving?"Guardando...":"Guardar"," "))},dependencies:[g,P,O,R,H,G,j,V,T,Mt,yt,_t,gt,X,W,U,Z,Y,v,_,Tt,vt],encapsulation:2})}return t})();function ht(t,m){t&1&&(n(0,"th",12),a(1,"Nombre"),e())}function St(t,m){if(t&1&&(n(0,"td",13),a(1),e()),t&2){let i=m.$implicit;r(),D(i.name)}}function xt(t,m){t&1&&(n(0,"th",12),a(1,"Descripci\xF3n"),e())}function Bt(t,m){if(t&1&&(n(0,"td",13),a(1),e()),t&2){let i=m.$implicit;r(),D(i.description||"-")}}function Et(t,m){t&1&&(n(0,"th",12),a(1,"Estado"),e())}function At(t,m){if(t&1&&(n(0,"td",13)(1,"span",14),a(2),e()()),t&2){let i=m.$implicit;r(),p("ngClass",i.active?"bg-success":"bg-danger"),r(),M(" ",i.active?"Activo":"Inactivo"," ")}}function wt(t,m){t&1&&(n(0,"th",12),a(1,"Acciones"),e())}function Ft(t,m){if(t&1){let i=B();n(0,"td",13)(1,"button",15),C("click",function(){let o=h(i).$implicit,k=E();return S(k.openDialog(o))}),n(2,"mat-icon"),a(3,"edit"),e()()()}}function It(t,m){t&1&&d(0,"tr",16)}function Rt(t,m){t&1&&d(0,"tr",17)}var ue=(()=>{class t{banksService=c(b);snackBar=c(F);types=[];displayedColumns=["name","description","active","actions"];ngOnInit(){this.loadTypes()}loadTypes(){this.banksService.getBankAccountTypes().subscribe({next:i=>this.types=i,error:()=>this.snackBar.open("Error al cargar tipos de cuenta","Cerrar",{duration:3e3})})}dialog=c(Ct);openDialog(i){this.dialog.open(bt,{width:"400px",data:{type:i}}).afterClosed().subscribe(o=>{o&&(this.loadTypes(),this.snackBar.open("Tipo de cuenta actualizado","OK",{duration:3e3}))})}static \u0275fac=function(l){return new(l||t)};static \u0275cmp=y({type:t,selectors:[["app-bank-account-types"]],decls:28,vars:3,consts:[[1,"container-fluid","p-4"],[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","active"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"badge",3,"ngClass"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(l,o){l&1&&(n(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),a(4,"Tipos de Cuenta"),e(),n(5,"mat-card-subtitle"),a(6,"Configurar categor\xEDas de cuentas bancarias"),e(),d(7,"span",1),n(8,"button",2),C("click",function(){return o.openDialog()}),n(9,"mat-icon"),a(10,"add"),e(),a(11," Nuevo Tipo "),e()(),n(12,"mat-card-content")(13,"table",3),u(14,4),s(15,ht,2,0,"th",5)(16,St,2,1,"td",6),f(),u(17,7),s(18,xt,2,0,"th",5)(19,Bt,2,1,"td",6),f(),u(20,8),s(21,Et,2,0,"th",5)(22,At,3,2,"td",6),f(),u(23,9),s(24,wt,2,0,"th",5)(25,Ft,4,0,"td",6),f(),s(26,It,1,0,"tr",10)(27,Rt,1,0,"tr",11),e()()()()),l&2&&(r(13),p("dataSource",o.types),r(13),p("matHeaderRowDef",o.displayedColumns),r(),p("matRowDefColumns",o.displayedColumns))},dependencies:[g,A,st,it,at,lt,ot,nt,ct,rt,mt,pt,dt,v,_,w,et,tt,Q,L,z,J,K,q,T,I],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.w-100[_ngcontent-%COMP%]{width:100%}mat-card-header[_ngcontent-%COMP%]{align-items:center;margin-bottom:20px}"]})}return t})();export{ue as BankAccountTypesComponent};
