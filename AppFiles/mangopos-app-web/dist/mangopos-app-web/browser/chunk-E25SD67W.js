import{a as F}from"./chunk-YSABNZJU.js";import{c as P}from"./chunk-6OXQWIOV.js";import{a as N,b as k}from"./chunk-26KDQVR5.js";import{b as $,c as ee}from"./chunk-APXOZHQA.js";import{a as V,b as j,c as G,d as R,f as z,g as U,h as Z}from"./chunk-ZWM7H6SC.js";import{b as J,c as K,d as Q,f as W,i as X,j as Y}from"./chunk-EWTXOCXT.js";import{b as T,d as u,f as A,g as B,k as D,n as q,o as L,w as O,y as H}from"./chunk-AVLO2MYP.js";import{a as te,b as re}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as E,I as x,K as I}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{l as y,v as S}from"./chunk-ZD4QWOHN.js";import{$ as l,Fb as o,Gb as t,Hb as r,Ib as C,Ub as p,Wa as a,ic as i,jb as b,jc as h,kc as M,pb as f,zb as w}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";function ae(n,c){n&1&&(t(0,"mat-error"),i(1," La contrase\xF1a actual es requerida "),r())}function ie(n,c){n&1&&(t(0,"mat-error"),i(1," La nueva contrase\xF1a es requerida "),r())}function ne(n,c){n&1&&(t(0,"mat-error"),i(1," M\xEDnimo 6 caracteres "),r())}function oe(n,c){n&1&&(t(0,"mat-error"),i(1," Las contrase\xF1as no coinciden "),r())}function me(n,c){n&1&&(t(0,"mat-error"),i(1," Debe confirmar la contrase\xF1a "),r())}var xe=(()=>{class n{fb=l(O);authService=l(F);snackBar=l(N);router=l(P);passwordForm;loading=!1;hideCurrent=!0;hideNew=!0;hideConfirm=!0;constructor(){this.passwordForm=this.fb.group({currentPassword:["",u.required],newPassword:["",[u.required,u.minLength(6)]],confirmPassword:["",u.required]},{validators:this.passwordMismatchValidator})}passwordMismatchValidator(m){return m.get("newPassword")?.value===m.get("confirmPassword")?.value?null:{mismatch:!0}}onSubmit(){if(this.passwordForm.valid){this.loading=!0;let{currentPassword:m,newPassword:s}=this.passwordForm.value;this.authService.changePassword(m,s).subscribe({next:e=>{this.snackBar.open("Contrase\xF1a actualizada exitosamente","Cerrar",{duration:3e3}),this.router.navigate(["/dashboard/inicio"]),this.loading=!1},error:e=>{this.snackBar.open(e.error?.message||"Error al actualizar contrase\xF1a","Cerrar",{duration:5e3}),this.loading=!1}})}}static \u0275fac=function(s){return new(s||n)};static \u0275cmp=b({type:n,selectors:[["app-change-password"]],decls:43,vars:17,consts:[[1,"change-password-container"],[1,"password-card"],["mat-card-avatar","",1,"header-icon"],["color","primary"],[1,"password-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","currentPassword",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[4,"ngIf"],["matInput","","formControlName","newPassword",3,"type"],["matInput","","formControlName","confirmPassword",3,"type"],[1,"form-actions"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(s,e){if(s&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"mat-icon",3),i(5,"vpn_key"),r()(),t(6,"mat-card-title"),i(7,"Cambiar Contrase\xF1a"),r(),t(8,"mat-card-subtitle"),i(9,"Configure una nueva clave para su cuenta"),r()(),t(10,"mat-card-content")(11,"form",4),p("ngSubmit",function(){return e.onSubmit()}),t(12,"mat-form-field",5)(13,"mat-label"),i(14,"Contrase\xF1a Actual"),r(),C(15,"input",6),t(16,"button",7),p("click",function(){return e.hideCurrent=!e.hideCurrent}),t(17,"mat-icon"),i(18),r()(),f(19,ae,2,0,"mat-error",8),r(),t(20,"mat-form-field",5)(21,"mat-label"),i(22,"Nueva Contrase\xF1a"),r(),C(23,"input",9),t(24,"button",7),p("click",function(){return e.hideNew=!e.hideNew}),t(25,"mat-icon"),i(26),r()(),t(27,"mat-hint"),i(28,"M\xEDnimo 6 caracteres"),r(),f(29,ie,2,0,"mat-error",8)(30,ne,2,0,"mat-error",8),r(),t(31,"mat-form-field",5)(32,"mat-label"),i(33,"Confirmar Nueva Contrase\xF1a"),r(),C(34,"input",10),t(35,"button",7),p("click",function(){return e.hideConfirm=!e.hideConfirm}),t(36,"mat-icon"),i(37),r()(),f(38,oe,2,0,"mat-error",8)(39,me,2,0,"mat-error",8),r(),t(40,"div",11)(41,"button",12),i(42),r()()()()()()),s&2){let d,g,_,v;a(11),o("formGroup",e.passwordForm),a(4),o("type",e.hideCurrent?"password":"text"),a(),w("aria-label","Hide password"),a(2),h(e.hideCurrent?"visibility_off":"visibility"),a(),o("ngIf",(d=e.passwordForm.get("currentPassword"))==null?null:d.hasError("required")),a(4),o("type",e.hideNew?"password":"text"),a(),w("aria-label","Hide password"),a(2),h(e.hideNew?"visibility_off":"visibility"),a(3),o("ngIf",(g=e.passwordForm.get("newPassword"))==null?null:g.hasError("required")),a(),o("ngIf",(_=e.passwordForm.get("newPassword"))==null?null:_.hasError("minlength")),a(4),o("type",e.hideConfirm?"password":"text"),a(),w("aria-label","Hide password"),a(2),h(e.hideConfirm?"visibility_off":"visibility"),a(),o("ngIf",e.passwordForm.errors==null?null:e.passwordForm.errors.mismatch),a(),o("ngIf",(v=e.passwordForm.get("confirmPassword"))==null?null:v.hasError("required")),a(2),o("disabled",e.passwordForm.invalid||e.loading),a(),M(" ",e.loading?"ACTUALIZANDO...":"ACTUALIZAR CONTRASE\xD1A"," ")}},dependencies:[S,y,H,D,T,A,B,L,q,Z,V,U,G,z,R,j,Y,X,J,Q,K,W,ee,$,I,x,E,re,te,k],styles:[".change-password-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:50px}.password-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:20px}.header-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#e3f2fd;border-radius:50%}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:25px}.form-actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:flex-end}"]})}return n})();export{xe as ChangePasswordComponent};
