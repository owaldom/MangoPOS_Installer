import{a as vt,b as bt}from"./chunk-XEWEKXFC.js";import{a as k}from"./chunk-NN3ONOAJ.js";import{a as ut,b as ft,c as Ct,d as Mt,e as gt,f as _t,g as Et,h as b}from"./chunk-Z6YHTX75.js";import{a as I,b as R}from"./chunk-26KDQVR5.js";import"./chunk-EQXJNMRX.js";import{b as Y,c as Z}from"./chunk-APXOZHQA.js";import{a as it,b as nt,c as at,d as ot,e as rt,f as mt,g as lt,h as dt,i as ct,j as st,l as pt}from"./chunk-VJGP4MMT.js";import"./chunk-YCMZOG5D.js";import{a as L,b as q,c as z,d as K,f as J,h as Q}from"./chunk-ZWM7H6SC.js";import"./chunk-TEMJ73U5.js";import{b as U,i as W,j as X}from"./chunk-EWTXOCXT.js";import{b as N,d as A,f as G,g as H,k as O,n as V,o as j,w as $,y as P}from"./chunk-AVLO2MYP.js";import{a as tt,b as et}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as F,I as E,K as v}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{j as T,v as _}from"./chunk-ZD4QWOHN.js";import{$ as d,Fb as c,Gb as n,Hb as e,Ib as s,Mb as u,Nb as f,Pb as B,Ub as C,Wa as r,Wb as w,db as x,ea as D,fa as S,ic as a,jb as g,jc as y,kc as M,pb as p}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";var kt=(()=>{class t{data;fb=d($);banksService=d(k);dialogRef=d(ut);entityForm;saving=!1;constructor(i){this.data=i,this.entityForm=this.fb.group({name:[i.entity?.name||"",A.required],code:[i.entity?.code||""],active:[i.entity?i.entity.active:!0]})}onSubmit(){this.entityForm.invalid||(this.saving=!0,this.banksService.createBankEntity(this.entityForm.value).subscribe({next:()=>this.dialogRef.close(!0),error:()=>{this.saving=!1,alert("Error al guardar entidad")}}))}static \u0275fac=function(l){return new(l||t)(x(ft))};static \u0275cmp=g({type:t,selectors:[["app-bank-entity-dialog"]],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"d-flex","flex-column","gap-3","mt-2",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","name"],["matInput","","formControlName","code"],["formControlName","active"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(l,o){l&1&&(n(0,"h2",0),a(1),e(),n(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),a(6,"Nombre"),e(),s(7,"input",3),e(),n(8,"mat-form-field",2)(9,"mat-label"),a(10,"C\xF3digo (Opcional)"),e(),s(11,"input",4),e(),n(12,"mat-checkbox",5),a(13,"Entidad Activa"),e()()(),n(14,"mat-dialog-actions",6)(15,"button",7),a(16,"Cancelar"),e(),n(17,"button",8),C("click",function(){return o.onSubmit()}),a(18),e()()),l&2&&(r(),M("",o.data.entity?"Editar":"Nueva"," Entidad Bancaria"),r(2),c("formGroup",o.entityForm),r(14),c("disabled",o.entityForm.invalid||o.saving),r(),M(" ",o.saving?"Guardando...":"Guardar"," "))},dependencies:[_,P,O,N,G,H,j,V,b,Mt,gt,Et,_t,X,W,U,Z,Y,v,E,bt,vt],encapsulation:2})}return t})();function Dt(t,m){t&1&&(n(0,"th",12),a(1,"Nombre"),e())}function St(t,m){if(t&1&&(n(0,"td",13),a(1),e()),t&2){let i=m.$implicit;r(),y(i.name)}}function xt(t,m){t&1&&(n(0,"th",12),a(1,"C\xF3digo"),e())}function Bt(t,m){if(t&1&&(n(0,"td",13),a(1),e()),t&2){let i=m.$implicit;r(),y(i.code||"-")}}function wt(t,m){t&1&&(n(0,"th",12),a(1,"Estado"),e())}function Tt(t,m){if(t&1&&(n(0,"td",13)(1,"span",14),a(2),e()()),t&2){let i=m.$implicit;r(),c("ngClass",i.active?"bg-success":"bg-danger"),r(),M(" ",i.active?"Activo":"Inactivo"," ")}}function Ft(t,m){t&1&&(n(0,"th",12),a(1,"Acciones"),e())}function It(t,m){if(t&1){let i=B();n(0,"td",13)(1,"button",15),C("click",function(){let o=D(i).$implicit,h=w();return S(h.openDialog(o))}),n(2,"mat-icon"),a(3,"edit"),e()()()}}function Rt(t,m){t&1&&s(0,"tr",16)}function Nt(t,m){t&1&&s(0,"tr",17)}var ue=(()=>{class t{banksService=d(k);snackBar=d(I);entities=[];displayedColumns=["name","code","active","actions"];ngOnInit(){this.loadEntities()}loadEntities(){this.banksService.getBankEntities().subscribe({next:i=>this.entities=i,error:()=>this.snackBar.open("Error al cargar entidades","Cerrar",{duration:3e3})})}dialog=d(Ct);openDialog(i){this.dialog.open(kt,{width:"400px",data:{entity:i}}).afterClosed().subscribe(o=>{o&&(this.loadEntities(),this.snackBar.open("Entidad actualizada","OK",{duration:3e3}))})}static \u0275fac=function(l){return new(l||t)};static \u0275cmp=g({type:t,selectors:[["app-bank-entities"]],decls:28,vars:3,consts:[[1,"container-fluid","p-4"],[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","active"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"badge",3,"ngClass"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(l,o){l&1&&(n(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),a(4,"Entidades Bancarias"),e(),n(5,"mat-card-subtitle"),a(6,"Gestionar listado de bancos (entidades)"),e(),s(7,"span",1),n(8,"button",2),C("click",function(){return o.openDialog()}),n(9,"mat-icon"),a(10,"add"),e(),a(11," Nueva Entidad "),e()(),n(12,"mat-card-content")(13,"table",3),u(14,4),p(15,Dt,2,0,"th",5)(16,St,2,1,"td",6),f(),u(17,7),p(18,xt,2,0,"th",5)(19,Bt,2,1,"td",6),f(),u(20,8),p(21,wt,2,0,"th",5)(22,Tt,3,2,"td",6),f(),u(23,9),p(24,Ft,2,0,"th",5)(25,It,4,0,"td",6),f(),p(26,Rt,1,0,"tr",10)(27,Nt,1,0,"tr",11),e()()()()),l&2&&(r(13),c("dataSource",o.entities),r(13),c("matHeaderRowDef",o.displayedColumns),r(),c("matRowDefColumns",o.displayedColumns))},dependencies:[_,T,pt,it,at,lt,ot,nt,dt,rt,mt,ct,st,v,E,F,et,tt,Q,L,z,J,K,q,b,R],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.w-100[_ngcontent-%COMP%]{width:100%}mat-card-header[_ngcontent-%COMP%]{align-items:center;margin-bottom:20px}"]})}return t})();export{ue as BankEntitiesComponent};
