import{a as xe}from"./chunk-DEAF3FKS.js";import{a as he,b as _e,c as Ce,d as ge,e as Me,f as be,g as we,h as x}from"./chunk-Z6YHTX75.js";import{a as L,b as N}from"./chunk-26KDQVR5.js";import"./chunk-GRESZPIF.js";import"./chunk-EQXJNMRX.js";import{b as X,c as Y}from"./chunk-APXOZHQA.js";import{a as te,b as oe,c as ie,d as ne,e as ae,f as re,g as me,h as le,i as se,j as de,k as ce,l as ue}from"./chunk-VJGP4MMT.js";import{a as pe,b as fe}from"./chunk-VNZMNOUU.js";import"./chunk-YCMZOG5D.js";import{a as $,h as z}from"./chunk-ZWM7H6SC.js";import"./chunk-TEMJ73U5.js";import{d as R,g as k}from"./chunk-52A733DE.js";import"./chunk-GPHRSLLH.js";import{b as U,c as J,i as K,j as Q}from"./chunk-EWTXOCXT.js";import{b as O,d as y,f as P,g as B,k as V,n as j,o as G,w as H,y as q}from"./chunk-AVLO2MYP.js";import{a as Z,b as ee}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as A,I as b,K as w}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{l as I,v as M}from"./chunk-ZD4QWOHN.js";import{$ as u,Fb as d,Gb as o,Hb as i,Ib as p,Mb as _,Nb as C,Pb as T,Ub as f,Wa as l,Wb as D,db as v,ea as E,fa as S,ic as n,jb as g,jc as F,kc as h,pb as c}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";function De(e,m){e&1&&(o(0,"mat-error"),n(1," El nombre es requerido "),i())}function ye(e,m){e&1&&(o(0,"mat-error"),n(1," El tipo es requerido "),i())}var Ee=(()=>{class e{dialogRef;data;fb=u(H);form;constructor(t,a){this.dialogRef=t,this.data=a,this.form=this.fb.group({name:[a.warehouse?.name||"",[y.required]],address:[a.warehouse?.address||""],type:[a.warehouse?.type||"factory",[y.required]]})}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}static \u0275fac=function(a){return new(a||e)(v(he),v(_e))};static \u0275cmp=g({type:e,selectors:[["app-warehouse-form"]],decls:28,vars:7,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],[1,"form-container"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Ej. Principal, Sucursal Norte..."],[4,"ngIf"],["matInput","","formControlName","address","placeholder","Ubicaci\xF3n f\xEDsica del almac\xE9n","rows","3"],["formControlName","type"],["value","factory"],["value","pos"],["align","end"],["mat-button","","type","button",3,"mat-dialog-close"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(a,r){if(a&1&&(o(0,"h2",0),n(1),i(),o(2,"form",1),f("ngSubmit",function(){return r.onSubmit()}),o(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),n(7,"Nombre del Almac\xE9n"),i(),p(8,"input",4),c(9,De,2,0,"mat-error",5),i(),o(10,"mat-form-field",3)(11,"mat-label"),n(12,"Direcci\xF3n"),i(),p(13,"textarea",6),i(),o(14,"mat-form-field",3)(15,"mat-label"),n(16,"Tipo de Almac\xE9n"),i(),o(17,"mat-select",7)(18,"mat-option",8),n(19,"F\xE1brica / Centro de Distribuci\xF3n"),i(),o(20,"mat-option",9),n(21,"Punto de Venta (Tienda)"),i()(),c(22,ye,2,0,"mat-error",5),i()()(),o(23,"mat-dialog-actions",10)(24,"button",11),n(25,"Cancelar"),i(),o(26,"button",12),n(27),i()()()),a&2){let s,W;l(),F(r.data.warehouse?"Editar Almac\xE9n":"Nuevo Almac\xE9n"),l(),d("formGroup",r.form),l(7),d("ngIf",(s=r.form.get("name"))==null?null:s.hasError("required")),l(13),d("ngIf",(W=r.form.get("type"))==null?null:W.hasError("required")),l(2),d("mat-dialog-close",!1),l(2),d("disabled",r.form.invalid),l(),h(" ",r.data.warehouse?"Actualizar":"Guardar"," ")}},dependencies:[M,I,q,V,O,P,B,G,j,x,ge,Me,we,be,Q,K,U,J,Y,X,w,b,fe,pe,R,k],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:8px 0;min-width:320px}.full-width[_ngcontent-%COMP%]{width:100%}"]})}return e})();function We(e,m){e&1&&(o(0,"th",14),n(1," ID "),i())}function Te(e,m){if(e&1&&(o(0,"td",15),n(1),i()),e&2){let t=m.$implicit;l(),h(" ",t.id," ")}}function Fe(e,m){e&1&&(o(0,"th",14),n(1," Nombre "),i())}function Ie(e,m){if(e&1&&(o(0,"td",15),n(1),i()),e&2){let t=m.$implicit;l(),h(" ",t.name," ")}}function Re(e,m){e&1&&(o(0,"th",14),n(1," Direcci\xF3n "),i())}function ke(e,m){if(e&1&&(o(0,"td",15),n(1),i()),e&2){let t=m.$implicit;l(),h(" ",t.address||"-"," ")}}function Ae(e,m){e&1&&(o(0,"th",14),n(1," Acciones "),i())}function Le(e,m){if(e&1){let t=T();o(0,"td",15)(1,"button",16),f("click",function(){let r=E(t).$implicit,s=D();return S(s.openForm(r))}),o(2,"mat-icon"),n(3,"edit"),i()(),o(4,"button",17),f("click",function(){let r=E(t).$implicit,s=D();return S(s.deleteWarehouse(r))}),o(5,"mat-icon"),n(6,"delete"),i()()()}}function Ne(e,m){e&1&&p(0,"tr",18)}function Oe(e,m){e&1&&p(0,"tr",19)}function Pe(e,m){e&1&&(o(0,"tr",20)(1,"td",21),n(2,"No hay almacenes registrados"),i()())}var gt=(()=>{class e{warehouses=[];displayedColumns=["id","name","address","type","actions"];warehouseService=u(xe);dialog=u(Ce);snackBar=u(L);ngOnInit(){this.loadWarehouses()}loadWarehouses(){this.warehouseService.getAll().subscribe({next:t=>this.warehouses=t,error:t=>console.error("Error cargando almacenes",t)})}openForm(t){this.dialog.open(Ee,{width:"450px",data:{warehouse:t}}).afterClosed().subscribe(r=>{r&&(t?this.warehouseService.update(t.id,r).subscribe({next:()=>{this.showSuccess("Almac\xE9n actualizado"),this.loadWarehouses()},error:s=>this.showError("Error al actualizar: "+(s.error?.error||s.message))}):this.warehouseService.create(r).subscribe({next:()=>{this.showSuccess("Almac\xE9n creado"),this.loadWarehouses()},error:s=>this.showError("Error al crear: "+(s.error?.error||s.message))}))})}deleteWarehouse(t){confirm(`\xBFEst\xE1s seguro de eliminar el almac\xE9n "${t.name}"?`)&&this.warehouseService.delete(t.id).subscribe({next:()=>{this.showSuccess("Almac\xE9n eliminado"),this.loadWarehouses()},error:a=>this.showError("Error al eliminar: "+(a.error?.error||a.message))})}showSuccess(t){this.snackBar.open(t,"Cerrar",{duration:3e3})}showError(t){this.snackBar.open(t,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=g({type:e,selectors:[["app-warehouses-list"]],decls:26,vars:3,consts:[[1,"container"],[1,"header"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","address"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(a,r){a&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Gesti\xF3n de Almacenes"),i(),o(4,"button",2),f("click",function(){return r.openForm()}),o(5,"mat-icon"),n(6,"add"),i(),n(7," Nuevo Almac\xE9n "),i()(),o(8,"mat-card")(9,"div",3)(10,"table",4),_(11,5),c(12,We,2,0,"th",6)(13,Te,2,1,"td",7),C(),_(14,8),c(15,Fe,2,0,"th",6)(16,Ie,2,1,"td",7),C(),_(17,9),c(18,Re,2,0,"th",6)(19,ke,2,1,"td",7),C(),_(20,10),c(21,Ae,2,0,"th",6)(22,Le,7,0,"td",7),C(),c(23,Ne,1,0,"tr",11)(24,Oe,1,0,"tr",12)(25,Pe,3,0,"tr",13),i()()()()),a&2&&(l(10),d("dataSource",r.warehouses),l(13),d("matHeaderRowDef",r.displayedColumns),l(),d("matRowDefColumns",r.displayedColumns))},dependencies:[M,z,$,w,b,A,ee,Z,ue,te,ie,me,ne,oe,le,ae,re,se,de,ce,x,N],styles:[".container[_ngcontent-%COMP%]{padding:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.full-width[_ngcontent-%COMP%]{width:100%}.mat-column-id[_ngcontent-%COMP%]{width:60px}.mat-column-actions[_ngcontent-%COMP%]{width:100px;text-align:right}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;display:inline-block}.badge.factory[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.badge.pos[_ngcontent-%COMP%]{background-color:#f1f8e9;color:#33691e}"]})}return e})();export{gt as WarehousesListComponent};
