import{a as ce}from"./chunk-NN3ONOAJ.js";import{a as me}from"./chunk-RFRKPPY3.js";import{a as re,b as le,h as se}from"./chunk-Z6YHTX75.js";import{a as oe}from"./chunk-DGQM6DPS.js";import{b as $,c as ee}from"./chunk-APXOZHQA.js";import{a as ie,b as ae}from"./chunk-VNZMNOUU.js";import"./chunk-YCMZOG5D.js";import"./chunk-TEMJ73U5.js";import{d as j}from"./chunk-52A733DE.js";import"./chunk-GPHRSLLH.js";import{b as Q,e as X,i as Y,j as Z}from"./chunk-EWTXOCXT.js";import{b as G,f as H,j as J,x as K}from"./chunk-AVLO2MYP.js";import{a as te,b as ne}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{I as U,K as q}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{k as L,l as R,u as z,v as N}from"./chunk-ZD4QWOHN.js";import{Fb as u,Gb as i,Hb as a,Ib as I,Mb as O,Nb as F,Pb as P,Ub as h,Wa as r,Wb as c,db as E,ea as m,fa as d,gc as w,ic as o,jb as B,jc as y,kc as W,mc as A,nc as p,oc as _,pb as x,pc as g,vc as C,zc as M}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";function de(s,f){if(s&1&&(i(0,"div",24)(1,"div",25)(2,"mat-icon"),o(3,"person"),a(),i(4,"span"),o(5),a()(),i(6,"div",26)(7,"div",27)(8,"span",28),o(9,"Saldo Actual:"),a(),i(10,"span",29),o(11),C(12,"currency"),a()()()()),s&2){let t=c();r(5),y(t.data.supplier.name),r(6),y(M(12,2,t.data.supplier.balance||0,"VES","Bs. ",t.settingsService.getDecimalFormat("total")))}}function pe(s,f){if(s&1){let t=P();i(0,"div",32)(1,"mat-form-field",33)(2,"mat-label"),o(3,"Monto Pagado"),a(),i(4,"span",34),o(5,"Bs. \xA0"),a(),i(6,"input",35),g("ngModelChange",function(e){m(t);let n=c(2);return _(n.receivedAmount,e)||(n.receivedAmount=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c(2);return d(n.calculateChange(e,"base"))}),a()()()}if(s&2){let t=c(2);r(6),p("ngModel",t.receivedAmount)}}function _e(s,f){if(s&1){let t=P();i(0,"div",32)(1,"mat-form-field",33)(2,"mat-label"),o(3,"Monto Pagado"),a(),i(4,"span",34),o(5,"$ \xA0"),a(),i(6,"input",35),g("ngModelChange",function(e){m(t);let n=c(2);return _(n.receivedAmountAlt,e)||(n.receivedAmountAlt=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c(2);return d(n.calculateChange(e,"alt"))}),a()()()}if(s&2){let t=c(2);r(6),p("ngModel",t.receivedAmountAlt)}}function ge(s,f){if(s&1){let t=P();i(0,"mat-form-field",38)(1,"mat-label"),o(2,"C\xE9dula/Telf (PM)"),a(),i(3,"input",43),g("ngModelChange",function(e){m(t);let n=c(3);return _(n.paymentDetails.paper.cedula,e)||(n.paymentDetails.paper.cedula=e),d(e)}),a()()}if(s&2){let t=c(3);r(3),p("ngModel",t.paymentDetails.paper.cedula)}}function ue(s,f){if(s&1){let t=P();i(0,"mat-form-field",38)(1,"mat-label"),o(2,"Cuenta"),a(),i(3,"input",44),g("ngModelChange",function(e){m(t);let n=c(3);return _(n.paymentDetails.transfer.account,e)||(n.paymentDetails.transfer.account=e),d(e)}),a()()}if(s&2){let t=c(3);r(3),p("ngModel",t.paymentDetails.transfer.account)}}function he(s,f){if(s&1&&(i(0,"mat-option",45),o(1),a()),s&2){let t=f.$implicit;u("value",t.id),r(),A(" ",t.name," - ",t.account_type_name," (",t.currency,") ")}}function fe(s,f){if(s&1){let t=P();i(0,"div",36),x(1,ge,4,1,"mat-form-field",37)(2,ue,4,1,"mat-form-field",37),i(3,"mat-form-field",38)(4,"mat-label"),o(5,"Referencia"),a(),i(6,"input",39),g("ngModelChange",function(e){m(t);let n=c(2);return _(n.paymentDetails[n.selectedMethod].reference,e)||(n.paymentDetails[n.selectedMethod].reference=e),d(e)}),a()(),i(7,"mat-form-field",38)(8,"mat-label"),o(9,"Banco"),a(),i(10,"mat-select",40),g("ngModelChange",function(e){m(t);let n=c(2);return _(n.selectedBankId,e)||(n.selectedBankId=e),d(e)}),i(11,"mat-option",41),o(12,"Ninguno"),a(),x(13,he,2,4,"mat-option",42),a()()()}if(s&2){let t=c(2);r(),u("ngIf",t.selectedMethod==="paper"),r(),u("ngIf",t.selectedMethod==="transfer"),r(4),p("ngModel",t.paymentDetails[t.selectedMethod].reference),r(4),p("ngModel",t.selectedBankId),r(3),u("ngForOf",t.getFilteredBanks(t.selectedMethod))}}function xe(s,f){if(s&1&&(O(0),x(1,pe,7,1,"div",30)(2,_e,7,1,"div",30)(3,fe,14,5,"div",31),F()),s&2){let t=c();r(),u("ngIf",t.selectedCurrency==="base"),r(),u("ngIf",t.selectedCurrency==="alt"),r(),u("ngIf",t.requiresBank(t.selectedMethod))}}function ye(s,f){if(s&1&&(i(0,"mat-option",45),o(1),a()),s&2){let t=f.$implicit;u("value",t.id),r(),A(" ",t.name," - ",t.account_type_name," (",t.currency,") ")}}function Ce(s,f){if(s&1&&(i(0,"mat-option",45),o(1),a()),s&2){let t=f.$implicit;u("value",t.id),r(),A(" ",t.name," - ",t.account_type_name," (",t.currency,") ")}}function Me(s,f){if(s&1&&(i(0,"mat-option",45),o(1),a()),s&2){let t=f.$implicit;u("value",t.id),r(),A(" ",t.name," - ",t.account_type_name," (",t.currency,") ")}}function Pe(s,f){if(s&1){let t=P();i(0,"div",47)(1,"div",48)(2,"mat-icon"),o(3,"request_quote"),a()(),i(4,"div",49),o(5,"Cr\xE9dito"),a(),i(6,"mat-form-field",50)(7,"span",34),o(8,"Bs. \xA0"),a(),i(9,"input",51),g("ngModelChange",function(e){m(t);let n=c(2);return _(n.payments.Credito,e)||(n.payments.Credito=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c(2);return d(n.updateMultiPayment("Credito",e,"base"))}),a()(),i(10,"mat-form-field",50)(11,"span",34),o(12,"$ \xA0"),a(),i(13,"input",52),g("ngModelChange",function(e){m(t);let n=c(2);return _(n.paymentsAlt.Credito,e)||(n.paymentsAlt.Credito=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c(2);return d(n.updateMultiPayment("Credito",e,"alt"))}),a()(),I(14,"div")(15,"div")(16,"div"),a()}if(s&2){let t=c(2);r(9),p("ngModel",t.payments.Credito),r(4),p("ngModel",t.paymentsAlt.Credito)}}function ve(s,f){if(s&1){let t=P();i(0,"div",46)(1,"div",47)(2,"div",48)(3,"mat-icon"),o(4,"payments"),a()(),i(5,"div",49),o(6,"Efectivo"),a(),i(7,"mat-form-field",50)(8,"span",34),o(9,"Bs. \xA0"),a(),i(10,"input",51),g("ngModelChange",function(e){m(t);let n=c();return _(n.payments.cash,e)||(n.payments.cash=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("cash",e,"base"))}),a()(),i(11,"mat-form-field",50)(12,"span",34),o(13,"$ \xA0"),a(),i(14,"input",52),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentsAlt.cash,e)||(n.paymentsAlt.cash=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("cash",e,"alt"))}),a()(),I(15,"div")(16,"div")(17,"div"),a(),i(18,"div",47)(19,"div",48)(20,"mat-icon"),o(21,"credit_card"),a()(),i(22,"div",49),o(23,"Tarjeta"),a(),i(24,"mat-form-field",50)(25,"span",34),o(26,"Bs. \xA0"),a(),i(27,"input",51),g("ngModelChange",function(e){m(t);let n=c();return _(n.payments.card,e)||(n.payments.card=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("card",e,"base"))}),a()(),i(28,"mat-form-field",50)(29,"span",34),o(30,"$ \xA0"),a(),i(31,"input",52),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentsAlt.card,e)||(n.paymentsAlt.card=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("card",e,"alt"))}),a()(),i(32,"mat-form-field",50)(33,"mat-label"),o(34,"Referencia"),a(),i(35,"input",39),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.card.reference,e)||(n.paymentDetails.card.reference=e),d(e)}),a()(),i(36,"mat-form-field",50)(37,"mat-label"),o(38,"Banco"),a(),i(39,"mat-select",40),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.card.bank_id,e)||(n.paymentDetails.card.bank_id=e),d(e)}),i(40,"mat-option",41),o(41,"Ninguno"),a(),x(42,ye,2,4,"mat-option",42),a()()(),i(43,"div",47)(44,"div",48)(45,"mat-icon"),o(46,"smartphone"),a()(),i(47,"div",49),o(48,"Pago M\xF3vil"),a(),i(49,"mat-form-field",50)(50,"span",34),o(51,"Bs. \xA0"),a(),i(52,"input",51),g("ngModelChange",function(e){m(t);let n=c();return _(n.payments.paper,e)||(n.payments.paper=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("paper",e,"base"))}),a()(),i(53,"mat-form-field",50)(54,"span",34),o(55,"$ \xA0"),a(),i(56,"input",52),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentsAlt.paper,e)||(n.paymentsAlt.paper=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("paper",e,"alt"))}),a()(),i(57,"mat-form-field",50)(58,"mat-label"),o(59,"C\xE9dula/Telf"),a(),i(60,"input",53),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.paper.cedula,e)||(n.paymentDetails.paper.cedula=e),d(e)}),a()(),i(61,"mat-form-field",50)(62,"mat-label"),o(63,"Referencia"),a(),i(64,"input",39),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.paper.reference,e)||(n.paymentDetails.paper.reference=e),d(e)}),a()(),i(65,"mat-form-field",50)(66,"mat-label"),o(67,"Banco"),a(),i(68,"mat-select",40),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.paper.bank_id,e)||(n.paymentDetails.paper.bank_id=e),d(e)}),i(69,"mat-option",41),o(70,"Ninguno"),a(),x(71,Ce,2,4,"mat-option",42),a()()(),i(72,"div",47)(73,"div",48)(74,"mat-icon"),o(75,"account_balance"),a()(),i(76,"div",49),o(77,"Transferencia"),a(),i(78,"mat-form-field",50)(79,"span",34),o(80,"Bs. \xA0"),a(),i(81,"input",51),g("ngModelChange",function(e){m(t);let n=c();return _(n.payments.transfer,e)||(n.payments.transfer=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("transfer",e,"base"))}),a()(),i(82,"mat-form-field",50)(83,"span",34),o(84,"$ \xA0"),a(),i(85,"input",52),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentsAlt.transfer,e)||(n.paymentsAlt.transfer=e),d(e)}),h("ngModelChange",function(e){m(t);let n=c();return d(n.updateMultiPayment("transfer",e,"alt"))}),a()(),i(86,"mat-form-field",50)(87,"mat-label"),o(88,"Cuenta"),a(),i(89,"input",54),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.transfer.account,e)||(n.paymentDetails.transfer.account=e),d(e)}),a()(),i(90,"mat-form-field",50)(91,"mat-label"),o(92,"Referencia"),a(),i(93,"input",39),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.transfer.reference,e)||(n.paymentDetails.transfer.reference=e),d(e)}),a()(),i(94,"mat-form-field",50)(95,"mat-label"),o(96,"Banco"),a(),i(97,"mat-select",40),g("ngModelChange",function(e){m(t);let n=c();return _(n.paymentDetails.transfer.bank_id,e)||(n.paymentDetails.transfer.bank_id=e),d(e)}),i(98,"mat-option",41),o(99,"Ninguno"),a(),x(100,Me,2,4,"mat-option",42),a()()(),x(101,Pe,17,2,"div",55),a()}if(s&2){let t=c();r(10),p("ngModel",t.payments.cash),r(4),p("ngModel",t.paymentsAlt.cash),r(13),p("ngModel",t.payments.card),r(4),p("ngModel",t.paymentsAlt.card),r(4),p("ngModel",t.paymentDetails.card.reference),r(4),p("ngModel",t.paymentDetails.card.bank_id),r(3),u("ngForOf",t.banks),r(10),p("ngModel",t.payments.paper),r(4),p("ngModel",t.paymentsAlt.paper),r(4),p("ngModel",t.paymentDetails.paper.cedula),r(4),p("ngModel",t.paymentDetails.paper.reference),r(4),p("ngModel",t.paymentDetails.paper.bank_id),r(3),u("ngForOf",t.getFilteredBanks("paper")),r(10),p("ngModel",t.payments.transfer),r(4),p("ngModel",t.paymentsAlt.transfer),r(4),p("ngModel",t.paymentDetails.transfer.account),r(4),p("ngModel",t.paymentDetails.transfer.reference),r(4),p("ngModel",t.paymentDetails.transfer.bank_id),r(3),u("ngForOf",t.banks),r(),u("ngIf",t.data.supplier)}}function we(s,f){if(s&1){let t=P();i(0,"div",56)(1,"div",57),h("click",function(){m(t);let e=c();return d(e.selectedMethod="cash")}),i(2,"mat-icon"),o(3,"payments"),a(),i(4,"span"),o(5,"Efectivo"),a()(),i(6,"div",57),h("click",function(){m(t);let e=c();return d(e.selectedMethod="card")}),i(7,"mat-icon"),o(8,"credit_card"),a(),i(9,"span"),o(10,"Tarjeta"),a()(),i(11,"div",57),h("click",function(){m(t);let e=c();return d(e.selectedMethod="paper")}),i(12,"mat-icon"),o(13,"smartphone"),a(),i(14,"span"),o(15,"Pago M\xF3vil"),a()(),i(16,"div",57),h("click",function(){m(t);let e=c();return d(e.selectedMethod="transfer")}),i(17,"mat-icon"),o(18,"account_balance"),a(),i(19,"span"),o(20,"Transferencia"),a()(),i(21,"div",57),h("click",function(){m(t);let e=c();return d(e.selectedMethod="Credito")}),i(22,"mat-icon"),o(23,"request_quote"),a(),i(24,"span"),o(25,"Cr\xE9dito"),a()()()}if(s&2){let t=c();r(),w("active",t.selectedMethod==="cash"),r(5),w("active",t.selectedMethod==="card"),r(5),w("active",t.selectedMethod==="paper"),r(5),w("active",t.selectedMethod==="transfer"),r(5),w("active",t.selectedMethod==="Credito")("disabled",!t.data.supplier)}}function be(s,f){s&1&&(i(0,"span",58),o(1,"Vuelto:"),a())}function Se(s,f){if(s&1&&(i(0,"div",7)(1,"div",8),o(2),C(3,"currency"),a(),i(4,"div",59),o(5),C(6,"currency"),a()()),s&2){let t=c();r(2),y(M(3,2,t.changeAlt,"USD","$ ",t.settingsService.getDecimalFormat("total"))),r(3),W("",M(6,7,t.change,"VES","Bs. ",t.settingsService.getDecimalFormat("total"))," ")}}function De(s,f){s&1&&(i(0,"span",60),o(1,"Faltante:"),a())}function Ee(s,f){if(s&1&&(i(0,"div",7)(1,"div",61),o(2),C(3,"currency"),a(),i(4,"div",62),o(5),C(6,"currency"),a()()),s&2){let t=c();r(2),y(M(3,2,t.remainingAlt,"USD","$ ",t.settingsService.getDecimalFormat("total"))),r(3),y(M(6,7,t.remaining,"VES","Bs. ",t.settingsService.getDecimalFormat("total")))}}var et=(()=>{class s{dialogRef;data;settingsService;banksService;receivedAmount=0;receivedAmountAlt=0;change=0;changeAlt=0;selectedMethod="cash";selectedCurrency="base";isMultiPayment=!1;payments={cash:0,card:0,paper:0,transfer:0,Credito:0};paymentsAlt={cash:0,card:0,paper:0,transfer:0,Credito:0};paymentDetails={card:{reference:"",bank:"",bank_id:""},paper:{reference:"",bank:"",cedula:"",bank_id:"",is_pago_movil:!0},transfer:{reference:"",bank:"",bank_id:"",account:""},cash:{reference:"",bank:"",bank_id:""},Credito:{reference:"",bank:"",bank_id:""}};banks=[];selectedBankId="";remaining=0;remainingAlt=0;constructor(t,l,e,n){this.dialogRef=t,this.data=l,this.settingsService=e,this.banksService=n}ngOnInit(){this.receivedAmountAlt=this.data.totalUSD,this.calculateChange(this.receivedAmountAlt,"alt"),this.loadBanks()}loadBanks(){this.banksService.getBanks(!0).subscribe({next:t=>{this.banks=t},error:t=>{console.error("Error loading banks:",t)}})}requiresBank(t){return["card","paper","Debito","Credito","transfer","cheque","PagoMovil"].includes(t)}getFilteredBanks(t){return t==="paper"||t==="PagoMovil"?this.banks.filter(l=>l.allows_pago_movil):this.banks}toggleMultiPayment(){this.isMultiPayment=!this.isMultiPayment,this.isMultiPayment?(this.receivedAmount>0&&(this.selectedCurrency==="base"?(this.payments.cash=this.receivedAmount,this.paymentsAlt.cash=0):(this.paymentsAlt.cash=this.receivedAmountAlt,this.payments.cash=0)),this.selectedMethod="mixed"):(this.selectedMethod="cash",this.payments={cash:0,card:0,paper:0,Credito:0},this.paymentsAlt={cash:0,card:0,paper:0,Credito:0},this.calculateChange(this.selectedCurrency==="base"?this.receivedAmount:this.receivedAmountAlt,this.selectedCurrency))}updateMultiPayment(t,l,e){let n=Number(l);isNaN(n)&&(n=0),e==="base"?this.payments[t]=n:this.paymentsAlt[t]=n,this.calculateTotals()}calculateTotals(){let l=this.settingsService.getSettings()?.total_decimals||2,e=this.data.exchangeRate||1,n=Object.values(this.payments).reduce((k,T)=>k+T,0),b=Object.values(this.paymentsAlt).reduce((k,T)=>k+T,0),V=n+b*e,v=b+n/e;this.receivedAmount=parseFloat(V.toFixed(l)),this.receivedAmountAlt=parseFloat(v.toFixed(l));let S=this.data.total,D=this.data.totalUSD;this.change=Math.max(0,this.receivedAmount-S),this.changeAlt=Math.max(0,this.receivedAmountAlt-D),this.remaining=Math.max(0,S-this.receivedAmount),this.remainingAlt=Math.max(0,D-this.receivedAmountAlt),this.change=parseFloat(this.change.toFixed(l)),this.changeAlt=parseFloat(this.changeAlt.toFixed(l)),this.remaining=parseFloat(this.remaining.toFixed(l)),this.remainingAlt=parseFloat(this.remainingAlt.toFixed(l))}calculateChange(t,l){let e=this.settingsService.getSettings(),n=e?.price_decimals||2,b=e?.total_decimals||2,V=this.data.exchangeRate||1,v=Number(t);isNaN(v)&&(v=0),l==="base"?(this.receivedAmount=v,this.receivedAmountAlt=parseFloat((v/V).toFixed(n))):(this.receivedAmountAlt=v,this.receivedAmount=parseFloat((v*V).toFixed(n)));let S=this.data.total,D=this.data.totalUSD;this.change=Math.max(0,this.receivedAmount-S),this.changeAlt=Math.max(0,this.receivedAmountAlt-D),this.remaining=Math.max(0,S-this.receivedAmount),this.remainingAlt=Math.max(0,D-this.receivedAmountAlt),this.change=parseFloat(this.change.toFixed(b)),this.changeAlt=parseFloat(this.changeAlt.toFixed(b)),this.remaining=parseFloat(this.remaining.toFixed(b)),this.remainingAlt=parseFloat(this.remainingAlt.toFixed(b))}setCurrency(t){this.selectedCurrency=t}onCancel(){this.dialogRef.close()}onConfirm(){let t={method:this.isMultiPayment?"mixed":this.selectedMethod==="paper"?"PagoMovil":this.selectedMethod,amount:this.selectedCurrency==="base"?this.receivedAmount:this.receivedAmountAlt,total:this.data.total,change:this.change,currency_id:this.selectedCurrency==="base"?1:2,exchange_rate:this.data.exchangeRate,bank_id:this.selectedBankId||null,multiparams:this.isMultiPayment?{payments:this.payments,paymentsAlt:this.paymentsAlt}:null,paymentDetails:this.selectedMethod==="card"||this.selectedMethod==="paper"||this.selectedMethod==="transfer"||this.selectedMethod==="Credito"||this.isMultiPayment?this.paymentDetails:null};this.dialogRef.close(t)}static \u0275fac=function(l){return new(l||s)(E(re),E(le),E(oe),E(ce))};static \u0275cmp=B({type:s,selectors:[["app-purchase-payment-dialog"]],decls:52,vars:39,consts:[[1,"payment-container"],[1,"title"],[1,"scrollable-content"],["class","supplier-info",4,"ngIf"],[1,"totals-summary"],[1,"total-row"],[1,"total-row","main"],[2,"text-align","right"],[2,"font-size","0.9rem","opacity","0.8"],[1,"input-section"],[1,"currency-tabs"],[3,"click"],[1,"payment-mode-toggle",2,"margin-top","10px","text-align","center","margin-bottom","0.5rem"],["mat-stroked-button","","color","primary",3,"click"],[4,"ngIf"],["class","multi-payment-list",4,"ngIf"],["class","methods-grid",4,"ngIf"],[1,"change-display"],["class","change-label",4,"ngIf"],["style","text-align: right;",4,"ngIf"],["class","change-label","style","color: #ef4444;",4,"ngIf"],[1,"actions"],["mat-stroked-button","",1,"btn-cancel",3,"click"],["mat-raised-button","","color","primary",1,"btn-confirm",3,"click","disabled"],[1,"supplier-info"],[1,"supplier-name"],[1,"credit-details"],[1,"credit-stat"],[1,"label"],[1,"value","debt"],["class","single-input-wrapper",4,"ngIf"],["style","margin-top: 12px; display: flex; gap: 8px;",4,"ngIf"],[1,"single-input-wrapper"],["appearance","outline",1,"full-width"],["matTextPrefix",""],["matInput","","appMoneyInput","","autocomplete","off",3,"ngModelChange","ngModel"],[2,"margin-top","12px","display","flex","gap","8px"],["appearance","outline","density","compact","style","flex: 1;",4,"ngIf"],["appearance","outline","density","compact",2,"flex","1"],["matInput","","placeholder","Ref #",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","V-12345678 / 0412...",3,"ngModelChange","ngModel"],["matInput","","placeholder","\xDAltimos 4 o full",3,"ngModelChange","ngModel"],[3,"value"],[1,"multi-payment-list"],[1,"multi-row-mat"],[1,"method-icon"],[1,"method-name"],["appearance","outline","density","compact"],["matInput","","appMoneyInput","","placeholder","0,00",3,"ngModelChange","ngModel"],["matInput","","appMoneyInput","","placeholder","0.00",3,"ngModelChange","ngModel"],["matInput","","placeholder","V-12345678",3,"ngModelChange","ngModel"],["matInput","","placeholder","Cuenta",3,"ngModelChange","ngModel"],["class","multi-row-mat",4,"ngIf"],[1,"methods-grid"],[1,"method-btn",3,"click"],[1,"change-label"],[1,"change-value"],[1,"change-label",2,"color","#ef4444"],[2,"font-size","0.9rem","opacity","0.8","color","#ef4444"],[1,"change-value",2,"color","#ef4444"]],template:function(l,e){l&1&&(i(0,"div",0)(1,"h2",1),o(2,"Finalizar Compra"),a(),i(3,"div",2),x(4,de,13,7,"div",3),i(5,"div",4)(6,"div",5)(7,"span"),o(8,"Subtotal"),a(),i(9,"span"),o(10),C(11,"currency"),a()(),i(12,"div",5)(13,"span"),o(14,"Impuestos"),a(),i(15,"span"),o(16),C(17,"currency"),a()(),i(18,"div",6)(19,"span"),o(20,"TOTAL"),a(),i(21,"div",7)(22,"div",8),o(23),C(24,"currency"),a(),i(25,"div"),o(26),C(27,"currency"),a()()()(),i(28,"div",9)(29,"div",10)(30,"button",11),h("click",function(){return e.setCurrency("base")}),o(31,"Bs."),a(),i(32,"button",11),h("click",function(){return e.setCurrency("alt")}),o(33,"$ USD"),a()(),i(34,"div",12)(35,"button",13),h("click",function(){return e.toggleMultiPayment()}),i(36,"mat-icon"),o(37),a(),o(38),a()(),x(39,xe,4,3,"ng-container",14)(40,ve,102,20,"div",15)(41,we,26,12,"div",16),a()(),i(42,"div",17),x(43,be,2,0,"span",18)(44,Se,7,12,"div",19)(45,De,2,0,"span",20)(46,Ee,7,12,"div",19),a(),i(47,"div",21)(48,"button",22),h("click",function(){return e.onCancel()}),o(49,"CANCELAR"),a(),i(50,"button",23),h("click",function(){return e.onConfirm()}),o(51," PROCESAR COMPRA "),a()()()),l&2&&(r(4),u("ngIf",e.data.supplier),r(6),y(M(11,19,e.data.subtotal,"VES","Bs. ",e.settingsService.getDecimalFormat("total"))),r(6),y(M(17,24,e.data.taxes,"VES","Bs. ",e.settingsService.getDecimalFormat("total"))),r(7),y(M(24,29,e.data.totalUSD,"USD","$ ",e.settingsService.getDecimalFormat("total"))),r(3),y(M(27,34,e.data.total,"VES","Bs. ",e.settingsService.getDecimalFormat("total"))),r(4),w("active",e.selectedCurrency==="base"),r(2),w("active",e.selectedCurrency==="alt"),r(5),y(e.isMultiPayment?"arrow_back":"layers"),r(),W(" ",e.isMultiPayment?"Volver de Pago Mixto":"Activar Pago Mixto"," "),r(),u("ngIf",!e.isMultiPayment),r(),u("ngIf",e.isMultiPayment),r(),u("ngIf",!e.isMultiPayment),r(2),u("ngIf",e.remaining<=0),r(),u("ngIf",e.remaining<=0),r(),u("ngIf",e.remaining>0),r(),u("ngIf",e.remaining>0),r(4),u("disabled",e.remaining>.05))},dependencies:[N,L,R,K,G,H,J,se,ne,te,q,U,Z,Y,Q,X,ee,$,ae,ie,j,me,z],styles:[".payment-container[_ngcontent-%COMP%]{padding:16px 24px;max-width:1000px;width:95%;background:#fff;font-family:Inter,system-ui,-apple-system,sans-serif;max-height:95vh;display:flex;flex-direction:column}.scrollable-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-right:8px;margin-bottom:16px}.title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;font-weight:700;color:#1a1a1a;text-align:center}.supplier-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:8px 12px;background:#f8fafc;border-radius:8px;margin-bottom:12px;border:1px solid #e2e8f0}.supplier-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;color:#334155}.supplier-name[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#64748b}.credit-details[_ngcontent-%COMP%]{display:flex;gap:24px}.credit-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.credit-stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#64748b;text-transform:uppercase;letter-spacing:.025em}.credit-stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1e293b}.credit-stat[_ngcontent-%COMP%]   .value.debt[_ngcontent-%COMP%]{color:#ef4444}.totals-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e2e8f0}.total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#64748b;font-size:14px}.total-row.main[_ngcontent-%COMP%]{margin-top:4px;padding-top:8px;border-top:2px dashed #e2e8f0}.total-row.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-size:16px;font-weight:700;color:#1a1a1a}.total-row.main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800;color:#2563eb}.currency-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:20px}.currency-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #e2e8f0;background:#fff;border-radius:8px;font-weight:600;color:#64748b;cursor:pointer;transition:all .2s}.currency-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border-color:#2563eb;box-shadow:0 4px 6px -1px #2563eb33}.multi-payment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:24px}.multi-row-mat[_ngcontent-%COMP%]{display:grid;grid-template-columns:32px 80px repeat(5,minmax(0,1fr));align-items:center;gap:8px;padding:8px 12px;background:#f8fafc;border-radius:8px;border:1px solid #e2e8f0;width:100%;box-sizing:border-box}.multi-row-mat[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:0}.method-icon[_ngcontent-%COMP%]{height:32px;width:32px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:8px;color:#2563eb;box-shadow:0 1px 2px #0000000d}.method-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px}.method-name[_ngcontent-%COMP%]{font-weight:600;font-size:13px;color:#334155;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.methods-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:12px}.method-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;background:#fff;border:1px solid #e2e8f0;border-radius:12px;cursor:pointer;transition:all .2s}.method-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#f1f5f9;border-color:#cbd5e1}.method-btn.active[_ngcontent-%COMP%]{background:#eff6ff;border-color:#2563eb;color:#2563eb}.method-btn.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background:#f8fafc}.method-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;height:28px;width:28px}.method-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:600}.change-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#1e293b;padding:12px 20px;border-radius:12px;margin-bottom:16px;color:#fff}.change-label[_ngcontent-%COMP%]{font-weight:600;color:#94a3b8}.change-value[_ngcontent-%COMP%]{font-size:24px;font-weight:800}.actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-cancel[_ngcontent-%COMP%]{flex:1;height:48px!important;border-radius:10px!important}.btn-confirm[_ngcontent-%COMP%]{flex:2;height:48px!important;border-radius:10px!important;font-weight:700!important}  .multi-payment-list .mat-mdc-text-field-wrapper,   .compact-single-details .mat-mdc-text-field-wrapper{background-color:#fff!important}"]})}return s})();export{et as PurchasePaymentDialogComponent};
