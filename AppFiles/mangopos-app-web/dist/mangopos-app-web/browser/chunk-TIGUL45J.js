import{a as h}from"./chunk-YCMZOG5D.js";import{c as d,d as g}from"./chunk-3TNWXQYU.js";import{$ as s,W as u}from"./chunk-WSMHJDAT.js";import{a as o,b as l}from"./chunk-C6Q5SG76.js";var S=(()=>{class i{http=s(g);apiUrl=`${h.apiUrl}/products`;filterProducts(t){let e=new d;return t.barcode&&(e=e.set("barcode",t.barcode)),t.name&&(e=e.set("name",t.name)),t.categoryId&&(e=e.set("categoryId",t.categoryId)),t.priceBuyMin!==void 0&&(e=e.set("priceBuyMin",t.priceBuyMin.toString())),t.priceBuyMax!==void 0&&(e=e.set("priceBuyMax",t.priceBuyMax.toString())),t.priceSellMin!==void 0&&(e=e.set("priceSellMin",t.priceSellMin.toString())),t.priceSellMax!==void 0&&(e=e.set("priceSellMax",t.priceSellMax.toString())),this.http.get(`${this.apiUrl}/filter-price-change`,{params:e})}calculatePreview(t,e){let c=Number(e.changeValue);return t.map(a=>{let r=Number(a.pricesell)||0,n=r;e.changeAction==="increase"?e.changeType==="percentage"?n=r+r*c/100:n=r+c:e.changeType==="percentage"?(n=r-r*c/100,console.log("newPrice",n),console.log("currentPrice",r),console.log("value",c)):n=r-c,n=parseFloat(Math.max(0,n).toFixed(2));let p=parseFloat((n-r).toFixed(2)),m=r>0?p/r*100:0;return l(o({},a),{newPrice:n,difference:p,percentageChange:m})})}applyBulkPriceChange(t){return this.http.post(`${this.apiUrl}/bulk-price-change`,t)}updateProductPrice(t,e){return this.http.put(`${this.apiUrl}/${t}/price`,{newPrice:e})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{S as a};
