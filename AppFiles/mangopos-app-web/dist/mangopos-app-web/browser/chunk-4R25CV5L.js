import{b as S,c as we}from"./chunk-LM6RXHSR.js";import"./chunk-ISB5W5SX.js";import{a as Se}from"./chunk-R3L57XND.js";import{a as y}from"./chunk-NL74O3Y5.js";import"./chunk-34EVCEMG.js";import{a as _e,b as ge,c as he}from"./chunk-HIZ742YJ.js";import"./chunk-XEWEKXFC.js";import"./chunk-RFRKPPY3.js";import{c as xe,h as Me}from"./chunk-Z6YHTX75.js";import{a as W,b as $}from"./chunk-26KDQVR5.js";import"./chunk-DGQM6DPS.js";import"./chunk-SCPRHZYR.js";import"./chunk-N7P7XLP2.js";import"./chunk-N5ZCCEPE.js";import"./chunk-GRESZPIF.js";import"./chunk-EQXJNMRX.js";import{b as te,c as ie}from"./chunk-APXOZHQA.js";import{a as ae,b as re,c as me,d as le,e as se,f as de,g as pe,h as ce,i as ue,j as Ce,l as fe}from"./chunk-VJGP4MMT.js";import"./chunk-VNZMNOUU.js";import"./chunk-YCMZOG5D.js";import{a as q,b as G,c as U,f as J,h as K}from"./chunk-ZWM7H6SC.js";import"./chunk-PALJ6VDH.js";import"./chunk-TEMJ73U5.js";import"./chunk-52A733DE.js";import"./chunk-GPHRSLLH.js";import{b as X,f as Y,i as Z,j as ee}from"./chunk-EWTXOCXT.js";import{b as Q,f as A,j as L,x as j}from"./chunk-AVLO2MYP.js";import{a as ne,b as oe}from"./chunk-JI7GBIO6.js";import"./chunk-VTP6RNFS.js";import{H as O,I as N,K as z}from"./chunk-M7DMR53X.js";import"./chunk-JAVK727W.js";import"./chunk-3TNWXQYU.js";import"./chunk-UWUK32S4.js";import{l as H,v as B}from"./chunk-ZD4QWOHN.js";import{$ as g,$b as T,Fb as c,Gb as t,Hb as o,Ib as w,Mb as u,Nb as C,Pb as b,Ub as p,Wa as s,Wb as M,_b as D,ac as v,ea as h,fa as x,ic as a,jb as E,kc as _,nc as k,oc as I,pb as d,pc as P,rc as R,vc as F,wc as V}from"./chunk-WSMHJDAT.js";import"./chunk-C6Q5SG76.js";function ye(e,r){e&1&&(t(0,"th",19),a(1," C\xE9dula / RIF "),o())}function Ee(e,r){if(e&1&&(t(0,"td",20),a(1),o()),e&2){let i=r.$implicit;s(),_(" ",i.taxid," ")}}function be(e,r){e&1&&(t(0,"th",19),a(1," Nombre / Raz\xF3n Social "),o())}function De(e,r){if(e&1&&(t(0,"td",20),a(1),o()),e&2){let i=r.$implicit;s(),_(" ",i.name," ")}}function Te(e,r){e&1&&(t(0,"th",19),a(1," Tel\xE9fono "),o())}function ve(e,r){if(e&1&&(t(0,"td",20),a(1),F(2,"phoneFormat"),o()),e&2){let i=r.$implicit;s(),_(" ",V(2,1,i.phone)," ")}}function ke(e,r){e&1&&(t(0,"th",19),a(1," Email "),o())}function Ie(e,r){if(e&1&&(t(0,"td",20),a(1),o()),e&2){let i=r.$implicit;s(),_(" ",i.email," ")}}function Pe(e,r){e&1&&(t(0,"th",19),a(1," Acciones "),o())}function Re(e,r){if(e&1){let i=b();t(0,"td",20)(1,"button",21),p("click",function(){let n=h(i).$implicit,l=M();return x(l.openViewDialog(n))}),t(2,"mat-icon"),a(3,"visibility"),o()(),t(4,"button",22),p("click",function(){let n=h(i).$implicit,l=M();return x(l.openEditDialog(n))}),t(5,"mat-icon"),a(6,"edit"),o()(),t(7,"button",23),p("click",function(){let n=h(i).$implicit,l=M();return x(l.openHistoryDialog(n))}),t(8,"mat-icon"),a(9,"history"),o()()()}}function Fe(e,r){e&1&&w(0,"tr",24)}function Ve(e,r){e&1&&w(0,"tr",25)}function He(e,r){e&1&&(t(0,"div",26),a(1," No se encontraron clientes. "),o())}var dt=(()=>{class e{customerService=g(Se);dialog=g(xe);snackBar=g(W);customers=[];searchText="";displayedColumns=["taxid","name","phone","email","actions"];totalElements=0;pageSize=50;paginator;ngOnInit(){this.loadCustomers()}loadCustomers(i=1){this.customerService.getAll(i,this.pageSize,this.searchText).subscribe(m=>{this.customers=m.data,this.totalElements=m.total})}onPageChange(i){this.loadCustomers(i.pageIndex+1)}openCreateDialog(){this.dialog.open(S,{width:"600px",maxWidth:"95vw"}).afterClosed().subscribe(m=>{m&&(this.loadCustomers(),this.snackBar.open("Cliente registrado","Cerrar",{duration:3e3}))})}openEditDialog(i){this.dialog.open(S,{width:"600px",maxWidth:"95vw",data:{customer:i}}).afterClosed().subscribe(n=>{n&&(this.loadCustomers(),this.snackBar.open("Cliente actualizado","Cerrar",{duration:3e3}))})}openViewDialog(i){this.dialog.open(S,{width:"600px",maxWidth:"95vw",data:{customer:i,viewOnly:!0}})}openHistoryDialog(i){this.dialog.open(we,{width:"900px",maxWidth:"95vw",data:{customer:i}})}static \u0275fac=function(m){return new(m||e)};static \u0275cmp=E({type:e,selectors:[["app-customers"]],viewQuery:function(m,n){if(m&1&&D(_e,5),m&2){let l;T(l=v())&&(n.paginator=l.first)}},features:[R([y])],decls:38,vars:7,consts:[[1,"container"],[1,"main-card"],[1,"header-actions"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Nombre, C\xE9dula o RIF",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"full-width-table",3,"dataSource"],["matColumnDef","taxid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phone"],["matColumnDef","email"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize"],["class","empty-msg",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent","title","Ver Detalle",3,"click"],["mat-icon-button","","color","primary","title","Editar",3,"click"],["mat-icon-button","","color","primary","title","Ver Historial de Pagos",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-msg"]],template:function(m,n){m&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),a(4,"Gesti\xF3n de Clientes"),o(),t(5,"div",2)(6,"mat-form-field",3)(7,"mat-label"),a(8,"Buscar cliente..."),o(),t(9,"input",4),P("ngModelChange",function(f){return I(n.searchText,f)||(n.searchText=f),f}),p("keyup.enter",function(){return n.loadCustomers()}),o(),t(10,"button",5),p("click",function(){return n.loadCustomers()}),t(11,"mat-icon"),a(12,"search"),o()()(),t(13,"button",6),p("click",function(){return n.openCreateDialog()}),t(14,"mat-icon"),a(15,"person_add"),o(),a(16," NUEVO CLIENTE "),o()()(),t(17,"mat-card-content")(18,"table",7),u(19,8),d(20,ye,2,0,"th",9)(21,Ee,2,1,"td",10),C(),u(22,11),d(23,be,2,0,"th",9)(24,De,2,1,"td",10),C(),u(25,12),d(26,Te,2,0,"th",9)(27,ve,3,3,"td",10),C(),u(28,13),d(29,ke,2,0,"th",9)(30,Ie,2,1,"td",10),C(),u(31,14),d(32,Pe,2,0,"th",9)(33,Re,10,0,"td",10),C(),d(34,Fe,1,0,"tr",15)(35,Ve,1,0,"tr",16),o(),t(36,"app-shared-paginator",17),p("page",function(f){return n.onPageChange(f)}),o(),d(37,He,2,0,"div",18),o()()()),m&2&&(s(9),k("ngModel",n.searchText),s(9),c("dataSource",n.customers),s(16),c("matHeaderRowDef",n.displayedColumns),s(),c("matRowDefColumns",n.displayedColumns),s(),c("length",n.totalElements)("pageSize",n.pageSize),s(),c("ngIf",n.customers.length===0))},dependencies:[B,H,fe,ae,me,pe,le,re,ce,se,de,ue,Ce,z,N,O,oe,ne,K,q,U,J,G,ie,te,Z,X,Y,ee,j,Q,A,L,Me,$,ge,he,y],styles:[".container[_ngcontent-%COMP%]{padding:20px}.main-card[_ngcontent-%COMP%]{padding:10px}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-left:auto}.search-field[_ngcontent-%COMP%]{width:300px;margin-bottom:-1.25em}.full-width-table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.empty-msg[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#888;font-style:italic}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}"]})}return e})();export{dt as CustomersComponent};
